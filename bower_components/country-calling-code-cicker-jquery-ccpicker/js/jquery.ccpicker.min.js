!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?e(require("jquery")):e(jQuery)}(function(e,t,o,c){"use strict";var i="ccPicker",n={countryCode:"LT",dialCodeFieldName:"phoneCode",dataUrl:"data.json",countryFilter:!0,searchPlaceHolder:"Search"};function r(t,o){var c=this;return this.element=t,this.options=e.extend({},n,o),this._defaults=n,this._name=i,this._list={},this._filter={},this._ccData={},this._ccPicker={},this._ccDialCodeTrackerField={},this._ccSelectedCountry={},this.init(),{setCountryByPhoneCode:function(t){var o=c.findCountryByPhoneCode(c,t);c._ccPicker.html(c.createCountryListItem(o.code,o.phoneCode)),c._ccDialCodeTrackerField.val(o.phoneCode),c._ccSelectedCountry={code:o.code,phoneCode:o.phoneCode},e(c.element).trigger("countrySelect",o)},setCountryByCode:function(t){var o=c.findCountryByCountryCode(c,t);c._ccPicker.html(c.createCountryListItem(o.code,o.phoneCode)),c._ccDialCodeTrackerField.val(o.phoneCode),c._ccSelectedCountry={code:o.code,phoneCode:o.phoneCode},e(c.element).trigger("countrySelect",o)},disable:function(){e(c.element).prop("disabled",!0),c._ccPicker.off("click"),c._ccPicker.css("cursor","default")},enable:function(){e(c.element).prop("disabled",!1),c._ccPicker.off("click"),c._ccPicker.on("click",function(t){e.isEmptyObject(c._list)?c.createCountryList(c):c.destroyCountryList(c),t.stopPropagation()}),c._ccPicker.css("cursor","pointer")}}}e.extend(r.prototype,{init:function(){var t=this;this.loadCountryData(t);var o=this.findCountryByCountryCode(t,this.options.countryCode);this._ccPicker=e('<div class="cc-picker cc-picker-code-select-enabled">').insertBefore(this.element),this._ccDialCodeTrackerField=e("<input>").attr({type:"hidden",id:this.element.id+"_"+this.options.dialCodeFieldName,name:this.element.name+"_"+this.options.dialCodeFieldName,value:o.phoneCode}).insertAfter(this.element),this._ccPicker.prepend(this.createCountryListItem(this.options.countryCode.toLowerCase(),o.phoneCode)),this._ccSelectedCountry={code:this.options.countryCode.toLowerCase(),phoneCode:o.phoneCode},this._ccPicker.on("click",function(o){e.isEmptyObject(t._list)?t.createCountryList(t):t.destroyCountryList(t),o.stopPropagation()}),e("body").on("click",function(){e.isEmptyObject(t._list)||t.destroyCountryList(t)})},loadCountryData:function(t){e.ajax({dataType:"json",url:t.options.dataUrl,type:"get",async:!1,success:function(e){t._ccData=e}})},findCountryByPhoneCode:function(t,o){return e.grep(t._ccData,function(e){return e.phoneCode.toUpperCase()===o.toUpperCase()})[0]},findCountryByCountryCode:function(t,o){return e.grep(t._ccData,function(e){return e.code.toUpperCase()===o.toUpperCase()})[0]},createCountryList:function(t){var o="auto"===t._ccPicker.css("z-index")?0:Number(t._ccPicker.css("z-index"))+10;t._list=e("<ul/>",{class:"cc-picker-code-list"}).appendTo("body"),t._list.css({top:t._ccPicker.offset().top+t._ccPicker.outerHeight()+(!0===t.options.countryFilter?25:0),left:t._ccPicker.offset().left,"z-index":o}),e.each(t._ccData,function(o,c){var i=e("<li>",{text:c.countryName}).appendTo(t._list);e(i).data("countryItem",c),e(i).prepend(t.createCountryListItem(c.code,c.phoneCode)),e(i).on("click",function(){t.selectCountry(t,e(this)),t.destroyCountryList(t)}),c.phoneCode===t._ccSelectedCountry.phoneCode&&e(i).addClass("cc-picker-selected-country")}),t.options.countryFilter&&(t._filter=e("<input/>",{class:"cc-picker-code-filter",placeholder:t.options.searchPlaceHolder}).insertBefore(t._list),t._filter.css({top:t._ccPicker.offset().top+t._ccPicker.outerHeight(),left:t._ccPicker.offset().left,"z-index":o}),t._filter.on("click",function(e){e.stopPropagation()}),t._filter.on("keyup",function(t){var o=e(this).val();e('.cc-picker-code-list li:not(:ccContains("'+o+'"))').hide(),e('.cc-picker-code-list li:ccContains("'+o+'")').show()}))},destroyCountryList:function(e){e._list.remove(),e._list={},e.options.countryFilter&&(e._filter.remove(),e._filter={})},selectCountry:function(t,o){var c=e(o).data("countryItem");this._ccSelectedCountry=c,t._ccPicker.html(t.createCountryListItem(c.code,c.phoneCode)),t._ccDialCodeTrackerField.val(c.phoneCode,c.code,c.phoneCode),e(t.element).trigger("countrySelect",c)},createCountryListItem:function(e,t){return'<div class="cc-picker-flag '+e.toLowerCase()+'"></div><span class="cc-picker-code">'+t+"</span> "}}),e.extend(e.expr[":"],{ccContains:function(t,o,c){return e(t).text().toUpperCase().indexOf(c[3].toUpperCase())>=0}}),e.fn.CcPicker=function(t){if("string"==typeof arguments[0]){var o,n=arguments[0],s=Array.prototype.slice.call(arguments,1);return this.each(function(){if(!e.data(this,"plugin_"+i)||"function"!=typeof e.data(this,"plugin_"+i)[n])throw new Error("Method "+n+" does not exist on jQuery."+i);o=e.data(this,"plugin_"+i)[n].apply(this,s)}),o!==c?o:this}if("object"==typeof t||!t)return this.each(function(){e.data(this,"plugin_"+i)||e.data(this,"plugin_"+i,new r(this,t))})}});
